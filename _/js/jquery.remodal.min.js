/*! Remodal - v0.1.6 - 2014-05-16
 * https://github.com/VodkaBears/remodal
 * Copyright (c) 2014 VodkaBears; */
!function(t){"use strict";function i(i,a){this.settings=t.extend({},o,a),this.modal=i,this.buildDOM(),this.addEventListeners(),this.index=t[s].lookup.push(this)-1,this.busy=!1}var s="remodal",o={hashTracking:!0};t[s]={lookup:[]};var a,e,n=function(t){var i=t.css("transition-duration")||t.css("-webkit-transition-duration")||t.css("-moz-transition-duration")||t.css("-o-transition-duration")||t.css("-ms-transition-duration")||0,s=t.css("transition-delay")||t.css("-webkit-transition-delay")||t.css("-moz-transition-delay")||t.css("-o-transition-delay")||t.css("-ms-transition-delay")||0;return 1e3*(parseFloat(i)+parseFloat(s))},d=function(){if(t(document.body).height()<=t(window).height())return 0;var i=document.createElement("div");i.style.visibility="hidden",i.style.width="100px",document.body.appendChild(i);var s=i.offsetWidth;i.style.overflow="scroll";var o=document.createElement("div");o.style.width="100%",i.appendChild(o);var a=o.offsetWidth;return i.parentNode.removeChild(i),s-a},r=function(){t("html, body").addClass(s+"_lock"),t(document.body).css("padding-right","+="+d())},l=function(){t("html, body").removeClass(s+"_lock"),t(document.body).css("padding-right","-="+d())};i.prototype.buildDOM=function(){this.body=t(document.body),this.bg=t("."+s+"-bg"),this.modalClose=t("<a href='#'>").addClass(s+"-close"),this.overlay=t("<div>").addClass(s+"-overlay"),this.modal.hasClass(s)||this.modal.addClass(s),this.modal.css("visibility","visible"),this.modal.append(this.modalClose),this.overlay.append(this.modal),this.body.append(this.overlay),this.confirm=this.modal.find("."+s+"-confirm"),this.cancel=this.modal.find("."+s+"-cancel");var i=n(this.overlay),o=n(this.modal),a=n(this.bg);this.td=o>i?o:i,this.td=a>this.td?a:this.td},i.prototype.addEventListeners=function(){var i=this;this.modalClose.bind("click."+s,function(t){t.preventDefault(),i.close()}),this.cancel.bind("click."+s,function(t){t.preventDefault(),i.modal.trigger("cancel"),i.close()}),this.confirm.bind("click."+s,function(t){t.preventDefault(),i.modal.trigger("confirm"),i.close()}),t(document).bind("keyup."+s,function(t){27===t.keyCode&&i.close()}),this.overlay.bind("click."+s,function(o){var a=t(o.target);a.hasClass(s+"-overlay")&&i.close()})},i.prototype.open=function(){if(!this.busy){this.busy=!0,this.modal.trigger("open");var i=this.modal.attr("data-"+s+"-id");i&&this.settings.hashTracking&&(e=t(window).scrollTop(),location.hash=i),a&&a!==this&&(a.overlay.hide(),a.body.removeClass(s+"_active")),a=this,r(),this.overlay.show();var o=this;setTimeout(function(){o.body.addClass(s+"_active"),setTimeout(function(){o.busy=!1,o.modal.trigger("opened")},o.td+50)},25)}},i.prototype.close=function(){if(!this.busy){this.busy=!0,this.modal.trigger("close"),this.settings.hashTracking&&this.modal.attr("data-"+s+"-id")===location.hash.substr(1)&&(location.hash="",t(window).scrollTop(e)),this.body.removeClass(s+"_active");var i=this;setTimeout(function(){i.overlay.hide(),l(),i.busy=!1,i.modal.trigger("closed")},i.td+50)}},t&&(t.fn[s]=function(o){var a;return this.each(function(e,n){var d=t(n);d.data(s)||(a=new i(d,o),d.data(s,a.index),a.settings.hashTracking&&d.attr("data-"+s+"-id")===location.hash.substr(1)&&a.open())}),a}),t(document).ready(function(){t(document).on("click","[data-"+s+"-target]",function(i){i.preventDefault();var o=i.currentTarget,a=o.getAttribute("data-"+s+"-target"),e=t("[data-"+s+"-id="+a+"]");t[s].lookup[e.data(s)].open()}),t(document).find("."+s).each(function(i,o){var a=t(o),e=a.data(s+"-options");e||(e={}),a[s](e)})});var c=function(i,o){var e=location.hash.replace("#","");if("undefined"==typeof o&&(o=!0),e){var n=t("[data-"+s+"-id="+e.replace(new RegExp("/","g"),"\\/")+"]");if(n.length){var d=t[s].lookup[n.data(s)];d&&d.settings.hashTracking&&d.open()}}else o&&a&&!a.busy&&a.settings.hashTracking&&a.close()};t(window).bind("hashchange."+s,c)}(window.jQuery||window.Zepto);